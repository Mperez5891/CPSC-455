<!DOCTYPE html>
<html>

    <title>Bank_Account.js</title>
        <body style = "background-color: lightblue;">

          <h1 style = "text-align: centered; font-size: 40px; border-style: double dashed; border-color: red;"> WELCOME TO SECURE BANKING WITH BANK.JS </h1>

        		<form style="float:right" name="form1" action="/logout" method="post" >
        			<label class="logoutButton">
        			<input name="submit2" type="submit" id="submit2" value="log out">
        			</label>
        		</form>

            <div id="accounts"></div>

<script>

fetch('http://localhost:3000/jsonData', {credentials: 'same-origin'})
.then((response) => {

		return response.json();
		})
.then((data) => {
		// Work with JSON data here

			console.log(data);

			// Get the DIV tag
			let accountDiv = document.getElementById("accounts");

			let acctStr = "";

			for(let acct of data)
			{
        //Jonathan Edit adding text for name, account ID, account Name and account
				acctStr = acctStr + "Account Name: " + acct.accountName + " </br>  Account Amount: " + acct.amount +
                " <br> Account Name: " + acct.name + " </br>  Account ID: " + acct.accID + "<br> <br> <br>";
				console.log(acct.name);

			}

			accountDiv.innerHTML = acctStr;
		})
.catch((err) => {
		alert("Error!");
		// Do something for an error here
		})

	</script>

<!--Original Items

<h1>Deposit</h1>
<form action="/deposit1" method="POST">
Account:
<input type="text" name="accountName" />
Amount:
<input type="test" name="amount" />
<input type="submit" />
</form>
<hr>
<h1>Withdrawal</h1>
<form action="/withdraw1" method="POST">
Account:
<input type="text" name="accountName" />
Amount:
<input type="test" name="amount" />
<input type="submit" />
</form>
<hr>
<h1>Transfer</h1>
<form action="/transfer1" method="POST">
Source Account:
<input type="text" name="srcAccountName" />
Destination Account:
<input type="text" name="dstAccountName" />
Amount:
<input type="test" name="amount" />
<input type="submit" />
</form>
<hr>
<h1>Create Bank Account</h1>
<form action="/bankAccount" method="POST">
Bank Account Name:
<input type="text" name="createbankname" />
Enter the Amount:
<input type="number" name="createamount" />
<input type="submit" />
</form>
-->

<!-- New Jonathan Editted Part-->
    <br> <br>
    <h1>Deposit</h1>

        <form action="/deposit1" method="POST">

            <!--Selection Options-->
            <label for="depAcct1"> Account: </label>
            <!--value sent is associated with what name attr is equal to-->
            <select name="accountName" id="depAcct1" required/>
                <!--Insert Options List -->
            </select> <br><br>

            <label for ="depAmt"> Amount: </label>
            <input type="number" id="amount" name="amount"
             min="0.01" max="500" step=".01" required/>

            <input type="submit" />

        </form>

    <hr>

    <h1>Withdrawal</h1>
        <form action="/withdraw1" method="POST">

          <!--Selection Options-->
          <label for="withAcct1"> Account: </label>
          <!--value sent is associated with what name attr is equal to-->
          <select name="accountName" id="withAcct1" required/>
              <!--Insert Options List -->
          </select> <br><br>

          <label for ="withAmt"> Amount: </label>
          <input type="number" id="amount" name="amount"
           min="0.01" max="500" step=".01" required/>

          <input type="submit" />

        </form>

    <hr>

    <h1>Transfer</h1>
        <form action="/transfer1" method="POST">

          <!--Selection Options-->
          <label for="srcAcct1"> Source Account: </label>
          <!--value sent is associated with what name attr is equal to-->
          <select name="srcAccountName" id="srcAcct1" required/>
              <!--Insert Options List -->
          </select> <br><br>



          <!--Selection Options-->
          <label for="dstAcct1"> Destination Account: </label>
          <!--value sent is associated with what name attr is equal to-->
          <select name="dstAccountName" id="dstAcct1" required/>
              <!--Insert Options List -->
          </select> <br><br>

          <label for ="transferAmt"> Amount: </label>
          <input type="number" id="amount" name="amount"
           min="0.01" max="500" step=".01" required/>

          <input type="submit" />

        </form>


    <hr>

    <h1>Create Bank Account</h1>

        <form action="/bankAccount" method="POST">

            <label for ="createAcctName"> Bank Account Name </label>
            <input type="text" name="createbankname" maxlength="10" required/>

            <label for ="newAmount"> Amount: </label>
            <input type="number" id="amount" name="createamount"
             min="0.01" max="500" step=".01" required/>

            <input type="submit" />

      </form>
<!--Jonathan Edited Script-->

<script>

fetch('http://localhost:3000/jsonData', {credentials: 'same-origin'})
.then((response) => {

  return response.json();
  })
.then((data2) => {
  // Work with JSON data here

    console.log(data2);

    function fillSelection(location){
        //Populate PickList Account Options
          let placeHolder =  document.getElementById(location);

             //insert none value
             let noneChoice = document.createElement("option");
             noneChoice.text = "Choose";
             noneChoice.value= "";
             placeHolder.appendChild(noneChoice);

               for (let acct2 of data2){
                 let pickValue = acct2.accountName;
                 console.log(acct2.accountName)
                 let elem = document.createElement("option");
                 elem.text = pickValue;
                 elem.value = pickValue;

                 placeHolder.appendChild(elem);

               };
    }

    fillSelection("depAcct1");
    fillSelection("withAcct1");
    fillSelection("srcAcct1");
    fillSelection("dstAcct1");



  })
.catch((err) => {
  alert("Error2!");
  // Do something for an error here
})

</script>


</body>

</html>
